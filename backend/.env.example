# ========================================
# Voice AI Tutor - Production Environment Variables
# ========================================

# Server Configuration
# --------------------
NODE_ENV=production                    # Environment: development, production
PORT=5000                              # Server port (default: 5000)
INSTANCE_ID=backend-1                  # Unique identifier for this instance (backend-1, backend-2, backend-3)

# Frontend Configuration
# ----------------------
FRONTEND_URL=http://localhost:3000     # Frontend URL for CORS (e.g., https://yourdomain.com)

# Logging Configuration
# ---------------------
LOG_LEVEL=info                         # Winston log level: error, warn, info, debug

# MongoDB Configuration
# ---------------------
# Production MongoDB with replica set (rs0)
MONGODB_URI=mongodb://localhost:27017/ai-tutor?replicaSet=rs0
# For MongoDB Atlas (cloud):
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/ai-tutor?retryWrites=true&w=majority&replicaSet=atlas-xxxxx

# JWT Authentication
# ------------------
# IMPORTANT: Must be at least 32 characters long for security
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-min-32-chars-long-change-in-production
JWT_EXPIRE=30d

# AI Service API Keys
# -------------------
# Groq API (REQUIRED for AI responses)
# Get your API key from: https://console.groq.com/keys
GROQ_API_KEY=your_groq_api_key_here
GROQ_MODEL=llama-3.3-70b-versatile

# Hugging Face API (OPTIONAL - for server-side STT fallback)
# Get your API key from: https://huggingface.co/settings/tokens
# No credit card required, generous free tier!
HUGGINGFACE_API_KEY=your_huggingface_api_key_here

# OpenAI API (OPTIONAL - for Whisper STT fallback)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Alternative AI APIs (Optional)
# GOOGLE_GEMINI_API_KEY=your_gemini_api_key_here

# MinIO Object Storage Configuration
# -----------------------------------
# MinIO is used for storing audio files (S3-compatible)
MINIO_ENDPOINT=localhost               # MinIO server endpoint (without http://)
MINIO_PORT=9000                        # MinIO server port (default: 9000)
MINIO_ACCESS_KEY=minioadmin            # MinIO access key (change in production!)
MINIO_SECRET_KEY=minioadmin            # MinIO secret key (change in production!)
MINIO_USE_SSL=false                    # Use HTTPS for MinIO (true/false)

# Email Configuration (Optional - for password reset)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password

# ========================================
# Stripe Payment Configuration
# ========================================
# Stripe API Keys (for payment processing)
# Get your keys from: https://dashboard.stripe.com/test/apikeys
# IMPORTANT: Use test keys for development, live keys for production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Product Price IDs (create in Stripe Dashboard)
# Basic Subscription: $9.99/month
STRIPE_BASIC_PRICE_ID=price_your_basic_price_id_here
# Pro Subscription: $19.99/month
STRIPE_PRO_PRICE_ID=price_your_pro_price_id_here

# App URL for Stripe redirects
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ========================================
# Redis Configuration
# ========================================
# Redis is used for:
# - DB 0: General caching and Socket.IO adapter
# - DB 1: Socket.IO message passing
# - DB 2: BullMQ job queues
# - DB 5: Conversation memory cache (NEW - for scalable AI chat)

REDIS_HOST=localhost                   # Redis server host
REDIS_PORT=6379                        # Redis server port (default: 6379)
REDIS_PASSWORD=                        # Redis password (leave empty if no auth)

# Alternative: Use full Redis URL (overrides HOST/PORT/PASSWORD)
# REDIS_URL=redis://localhost:6379

# For production (Redis Cloud, AWS ElastiCache, etc):
# REDIS_URL=redis://default:password@your-cluster.redis.cloud.com:6380
# or
# REDIS_HOST=your-cluster.redis.cloud.com
# REDIS_PORT=6380
# REDIS_PASSWORD=your_redis_password_here

# ========================================
# Conversation Memory Configuration
# ========================================
# Scalable conversation memory system uses Redis for caching
# IMPORTANT: System works WITHOUT Redis (graceful fallback to in-memory)
# Benefits WITH Redis:
# - 60-80% token cost reduction for conversations
# - Sub-100ms context retrieval
# - Supports millions of concurrent users
# - Distributed caching across servers
#
# See SCALABLE_CONVERSATION_MEMORY.md for full documentation

# ========================================
# Production Deployment Notes
# ========================================
# 1. Change all default credentials (MinIO, Redis, MongoDB)
# 2. Use strong JWT_SECRET (32+ characters, cryptographically random)
# 3. Enable SSL/TLS for all services in production
# 4. Set FRONTEND_URL to your actual domain
# 5. Configure MongoDB replica set properly (rs0)
# 6. Use Redis with authentication enabled
# 7. Secure MinIO with proper access policies
# 8. Set NODE_ENV=production for production deployments
# 9. Configure proper CORS origins in production
# 10. Enable rate limiting and monitoring

# ========================================
# Docker Deployment
# ========================================
# For multi-instance deployment:
# - Set INSTANCE_ID to unique values (backend-1, backend-2, backend-3)
# - Use docker-compose.yml to orchestrate all services
# - NGINX will load balance across instances
# - Redis adapter enables Socket.IO clustering
# - BullMQ distributes jobs across workers

# Example production URLs:
# MONGODB_URI=mongodb://mongodb-1:27017,mongodb-2:27017,mongodb-3:27017/ai-tutor?replicaSet=rs0
# REDIS_HOST=redis-cluster
# MINIO_ENDPOINT=minio
# FRONTEND_URL=https://yourdomain.com
